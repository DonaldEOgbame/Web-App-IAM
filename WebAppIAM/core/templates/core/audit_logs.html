{% block content %}
<div class="container">
  <h2>Audit Logs</h2>
  <form method="get" class="mb-3">
    <input type="text" name="q" placeholder="Search by user, action, IP..." value="{{ request.GET.q }}">
    <button class="btn" type="submit">Search</button>
  </form>
  <table>
    <thead>
      <tr>
        <th>Timestamp</th>
        <th>User</th>
        <th>Action</th>
        <th>IP</th>
        <th>Details</th>
      </tr>
    </thead>
    <tbody>
      {% for log in logs %}
      <tr>
        <td>{{ log.timestamp }}</td>
        <td>{{ log.user|default:'System' }}</td>
        <td>{{ log.get_action_display }}</td>
        <td>{{ log.ip_address }}</td>
        <td>{{ log.details|truncatechars:60 }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

{% extends 'base.html' %}
{% block content %}
<div class="container glass" style="max-width:1100px;margin:3em auto 0 auto;padding:2.5em 2em;">
  <h2 class="center" style="font-size:2em;margin-bottom:1.2em;background:linear-gradient(90deg,#6c63ff,#48c6ef);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;">Audit Logs</h2>
  <form method="get" class="mb-3" style="display:flex;gap:1em;align-items:center;justify-content:center;margin-bottom:2em;">
    <input class="form-control" type="text" name="q" placeholder="Search by user, action, IP..." value="{{ request.GET.q }}" style="max-width:320px;">
    <button class="btn" type="submit">&#128269; Search</button>
  </form>
  <div class="table-responsive">
    <table class="modern-table" style="border-radius:12px;overflow:hidden;">
      <thead>
        <tr style="background:linear-gradient(90deg,#e3e9f7,#f8fafc);">
          <th>Timestamp</th>
          <th>User</th>
          <th>Action</th>
          <th>IP</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        {% for log in logs %}
        <tr>
          <td>{{ log.timestamp }}</td>
          <td>{{ log.user|default:'System' }}</td>
          <td>{{ log.get_action_display }}</td>
          <td>{{ log.ip_address }}</td>
          <td>{{ log.details|truncatechars:60 }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="5" class="center">No logs found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
