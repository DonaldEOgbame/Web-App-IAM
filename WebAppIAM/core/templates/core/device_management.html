<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Device Management</title>
    <style>
        body{font-family:Arial, sans-serif;background:#f5f7fa;margin:0;}
        .container{max-width:960px;margin:40px auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
        h1{margin-top:0;text-align:center;color:#333;}
        table{width:100%;border-collapse:collapse;margin-top:20px;}
        th,td{padding:8px 12px;border-bottom:1px solid #ddd;text-align:left;}
        th{background:#f0f2f5;}
        tr.trusted{background:#e8f8e8;}
        .actions form{display:inline;}
        .actions button{margin-right:4px;padding:4px 8px;border:none;border-radius:4px;cursor:pointer;}
        .trust-btn{background:#2ecc71;color:#fff;}
        .remove-btn{background:#e74c3c;color:#fff;}
    </style>
</head>
<body>
<div class="container">
    <h1>Device Management</h1>
    <table>
        <thead>
        <tr>
            <th>Name</th>
            <th>Browser / OS</th>
            <th>Type</th>
            <th>Last Seen</th>
            <th>IP</th>
            <th>Location</th>
            <th>Uses</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for device in devices %}
        <tr class="{% if device.is_trusted %}trusted{% endif %}">
            <td>{{ device.device_name|default:'Unknown' }}</td>
            <td>{{ device.browser }} / {{ device.operating_system }}</td>
            <td>{{ device.device_type }}</td>
            <td>{{ device.last_seen }}</td>
            <td>{{ device.last_ip|default:'-' }}</td>
            <td>{{ device.last_location|default:'-' }}</td>
            <td>{{ device.times_used }}</td>
            <td class="actions">
                {% if not device.is_trusted %}
                <form method="post" action="{% url 'core:trust_device' device.id %}">{% csrf_token %}
                    <button type="submit" class="trust-btn">Trust</button>
                </form>
                {% endif %}
                <form method="post" action="{% url 'core:remove_device' device.id %}" onsubmit="return confirm('Remove this device?');">{% csrf_token %}
                    <button type="submit" class="remove-btn">Remove</button>
                </form>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="8">No devices found.</td></tr>
        {% endfor %}
        </tbody>
    </table>
</div>
</body>
</html>
