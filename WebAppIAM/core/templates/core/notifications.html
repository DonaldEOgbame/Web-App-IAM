{% extends 'base.html' %}
{% block content %}
<div class="container glass" style="max-width:700px;margin:3em auto 0 auto;padding:2.5em 2em;">
  <h2 class="center" style="font-size:2em;margin-bottom:1.2em;background:linear-gradient(90deg,#6c63ff,#48c6ef);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;">Notifications</h2>
  <div class="notification-center-list">
    {% for notif in notifications %}
      <div class="notification-item {% if not notif.read %}unread{% endif %} notification-{{ notif.type }}">
        <div class="notification-message">
          {% if notif.type == 'expiry' %}&#9888;{% elif notif.type == 'risk' %}&#128308;{% else %}&#128276;{% endif %}
          {{ notif.message|safe }}
          {% if notif.link %}<a href="{{ notif.link }}" class="btn btn-sm btn-outline-info ml-2">View</a>{% endif %}
        </div>
        <div class="notification-meta">
          <span class="notification-date">{{ notif.created_at|date:'Y-m-d H:i' }}</span>
          {% if not notif.read %}
            <form method="post" style="display:inline;">
              {% csrf_token %}
              <input type="hidden" name="notif_id" value="{{ notif.id }}">
              <button class="btn btn-sm btn-outline-success ml-2" type="submit">Mark as read</button>
            </form>
          {% else %}
            <span class="badge badge-success ml-2">Read</span>
          {% endif %}
        </div>
      </div>
    {% empty %}
      <div class="center" style="margin:2em 0;">No notifications.</div>
    {% endfor %}
  </div>
</div>
{% endblock %}
